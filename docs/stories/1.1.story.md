# Story 1.1: Project Foundation & Scaffolding

## Status

Draft

## Story

**As a** AI Agent Developer,
**I want** a new project repository initialized with the complete Clean Architecture directory structure and core dependencies,
**so that** I can immediately start development following DDD principles.

## Acceptance Criteria

1. A `pyproject.toml` file is created, managed by poetry, with Python 3.11+ specified.
2. Core dependencies are added: fastapi, pydantic, uvicorn, asyncpg (for Supabase/PostgreSQL), redis, python-jose[cryptography] (for JWT), and passlib[bcrypt] (for auth).
3. The complete Clean Architecture directory structure is scaffolded (e.g., `src/api`, `src/application`, `src/domain`, `src/infrastructure`, `src/shared`).
4. Basic alembic migration setup is created in a `migration/` folder.
5. Base configuration files are created: `README.md`, `.env.example`, `.gitignore`, and a `docker-compose.yml` (defining api, postgres, and redis services).
6. `src/api/main.py` is created with a basic FastAPI app instance and a `/api/docs` (Swagger) endpoint.
7. A health check endpoint (GET `/api/v1/health`) is implemented and returns a 200 OK status.

## Tasks / Subtasks

- [ ] Initialize Poetry project and Python version (AC: 1)
  - [ ] Configure `pyproject.toml` with Python 3.11+ and tool configs (black, ruff, mypy) [Source: architecture/coding-standards.md#core-standards]
- [ ] Add core dependencies and lock (AC: 2)
  - [ ] fastapi, pydantic v2, uvicorn, asyncpg, redis, python-jose[cryptography], passlib[bcrypt] [Source: architecture/tech-stack.md#technology-stack-table]
- [ ] Scaffold Clean Architecture directory structure (AC: 3)
  - [ ] Create `src/api`, `src/application`, `src/domain`, `src/infrastructure`, `src/shared` per structure [Source: architecture/source-tree.md]
- [ ] Create Alembic migration baseline (AC: 4)
  - [ ] Initialize `migration/` with env and script locations [Source: architecture/source-tree.md]
- [ ] Add base config and environment files (AC: 5)
  - [ ] Create `.env.example`, `.gitignore`, `README.md`, `docker-compose.yml` [Source: architecture/source-tree.md]
  - [ ] Define compose services: api, postgres (pgvector), redis [Source: architecture/tech-stack.md#cloud-infrastructure]
- [ ] Implement FastAPI entrypoint and docs (AC: 6)
  - [ ] Create `src/api/main.py` with FastAPI app and `/api/docs` [Source: architecture/source-tree.md]
- [ ] Implement health endpoint (AC: 7)
  - [ ] Add `GET /api/v1/health` route returning 200 OK [Source: architecture/source-tree.md]
- [ ] Add initial test scaffolding
  - [ ] Create `tests/unit/`, `tests/integration/`, `tests/e2e/` folders [Source: architecture/test-strategy-and-standards.md#test-types-and-organization]

## Dev Notes

- **Tech Stack**: Use Python 3.11+, FastAPI, Uvicorn, Poetry; DB: PostgreSQL 15+ with pgvector; Cache: Redis; Migrations: Alembic. [Source: architecture/tech-stack.md#technology-stack-table]
- **Project Structure**: Follow the provided source tree; ensure layers and file paths match exactly to maintain Clean Architecture boundaries. [Source: architecture/source-tree.md]
- **Clean Architecture Constraints**: Enforce layer import rules; no business logic in API layer; use repository pattern; custom exceptions only. [Source: architecture/coding-standards.md#critical-rules]
- **Security**: Tokens will be implemented in later stories; for now, avoid hardcoded secrets and load config via settings module when added. [Source: architecture/security.md#secrets-management]
- **Testing Standards**: Organize tests per pyramid; unit tests for utilities if any in this story; prepare directories for future tests. [Source: architecture/test-strategy-and-standards.md#testing-philosophy]

### Testing

- Place tests under `tests/` mirroring `src/` structure. Use pytest; follow AAA pattern; maintain coverage goals per layer over the epic. [Source: architecture/test-strategy-and-standards.md#unit-tests]

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-06 | 0.1 | Initial draft created | Scrum Master |

## Dev Agent Record

### Agent Model Used

<to be filled by dev agent>

### Debug Log References

<to be filled by dev agent>

### Completion Notes List

<to be filled by dev agent>

### File List

<to be filled by dev agent>


