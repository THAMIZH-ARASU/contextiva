# Story 1.5 Manual Test Results

## Test Date: 2025-11-07

### Test Environment
- API: http://localhost:8000
- Database: PostgreSQL with pgvector (contextiva-postgres)
- Auth: JWT tokens from Story 1.4
- Test User: testuser/testpass

## Test Results Summary

All manual tests PASSED ✅

### 1. Authentication Test
**Endpoint**: POST /api/v1/auth/token
**Result**: ✅ PASS
- Successfully obtained JWT token
- Token format: Bearer eyJhbGci...

### 2. Create Project (POST /api/v1/projects)
**Test**: Valid project creation
**Result**: ✅ PASS
```json
{
    "id": "fee96c1e-4afe-40f3-b44f-61c163c3c419",
    "name": "Test Project",
    "description": "A test",
    "status": "Active",
    "tags": ["test"]
}
```
- Returns 201 status
- Project has generated UUID
- Default status is "Active"

### 3. List Projects (GET /api/v1/projects)
**Test**: Get all projects
**Result**: ✅ PASS
- Returns array of projects
- Includes created project
- Returns 200 status

### 4. Get Project by ID (GET /api/v1/projects/{id})
**Test**: Retrieve specific project
**Result**: ✅ PASS
- Returns correct project by UUID
- All fields present
- Returns 200 status

### 5. Update Project (PUT /api/v1/projects/{id})
**Test**: Partial update
**Payload**: `{"name": "Updated Project", "status": "Archived"}`
**Result**: ✅ PASS
```json
{
    "id": "fee96c1e-4afe-40f3-b44f-61c163c3c419",
    "name": "Updated Project",
    "description": "A test",
    "status": "Archived",
    "tags": ["test"]
}
```
- Updated fields: name, status
- Unchanged fields: description, tags
- Returns 200 status

### 6. Delete Project (DELETE /api/v1/projects/{id})
**Test**: Remove project
**Result**: ✅ PASS
- Returns 204 No Content
- Subsequent GET returns empty array
- Project successfully removed from database

### 7. Authentication Protection
**Test**: Access without token
**Result**: ✅ PASS
- Returns 401 Unauthorized
- Cannot access any endpoint without Bearer token

### 8. Validation Tests
**Test**: Empty name
**Payload**: `{"name": ""}`
**Result**: ✅ PASS
```json
{
    "detail": [
        {
            "type": "string_too_short",
            "loc": ["body", "name"],
            "msg": "String should have at least 1 character",
            "input": "",
            "ctx": {"min_length": 1}
        }
    ]
}
```
- Returns 422 Unprocessable Entity
- Pydantic validation working correctly

## Acceptance Criteria Verification

1. ✅ **AC1**: All endpoints protected by JWT authentication (verified with 401 tests)
2. ✅ **AC2**: POST creates project with 201 status and validation
3. ✅ **AC3**: GET list returns projects with pagination support
4. ✅ **AC4**: GET by ID retrieves project or returns 404
5. ✅ **AC5**: PUT updates project with validation
6. ✅ **AC6**: DELETE removes project with 204 status
7. ✅ **AC7**: E2E tests created (23 test cases in test_projects.py)

## Notes

- All CRUD operations functional
- Proper HTTP status codes implemented
- Pydantic validation working as expected
- JWT authentication enforced on all endpoints
- Domain entity validation integrated with API layer
- Partial updates working correctly (only provided fields updated)

## Test Commands Used

```bash
# Get auth token
curl -X POST http://localhost:8000/api/v1/auth/token \
  -d "username=testuser&password=testpass"

# Create project
curl -X POST http://localhost:8000/api/v1/projects \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "Test Project", "description": "A test", "tags": ["test"]}'

# List projects
curl -X GET http://localhost:8000/api/v1/projects \
  -H "Authorization: Bearer $TOKEN"

# Get project by ID
curl -X GET http://localhost:8000/api/v1/projects/{id} \
  -H "Authorization: Bearer $TOKEN"

# Update project
curl -X PUT http://localhost:8000/api/v1/projects/{id} \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "Updated Project", "status": "Archived"}'

# Delete project
curl -X DELETE http://localhost:8000/api/v1/projects/{id} \
  -H "Authorization: Bearer $TOKEN"
```
